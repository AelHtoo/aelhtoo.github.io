<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Add to Cart  | Luci </title>
    <link rel="stylesheet" href="../style.css">
    <link rel="stylesheet" href="../bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" href="../Fontawesome/css/all.min.css">
    <link rel="icon" href="../Images/logo.png">
</head>
<body>
    <!-- nav start -->
    <div class="sticky-top">
        <nav class="navbar navbar-expand-md shadow bg-light">
            <div class="container">
                <img src="../Images/logo.png" alt="" class="img-fluid" style="width: 70px;">
                <img src="../Images/brand_name.png" alt="" class="navbar-brand ms-3 me-auto" style="width: 100px;height: 80px;">
                <button class="navbar-toggler" data-bs-target="#nav" data-bs-toggle="collapse">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse" id="nav">
                    <ul class="navbar-nav ms-auto">
                        <li class="nav-item"><a href="../index.html" class="nav-link">Home</a></li>
                        <li class="nav-item"><a href="menu.html" class="nav-link">Menu</a></li>
                        <li class="nav-item"><a href="about.html" class="nav-link">About</a></li>
                        <li class="nav-item"><a href="contact.html" class="nav-link">Contact</a></li>
                        <li class="nav-item"><a href="review.html" class="nav-link">Review</a></li>
                        <li class="nav-item active"><a href="cart.html" class="nav-link"><i class="fa-solid fa-cart-shopping fa-xl"></i><span class="position-absolute top-2 start-90 translate-middle badge rounded-pill bg-success" id="count_number"></span></a></li>
                    </ul>
                </div>
            </div>
        </nav>
    </div>
    <!-- nav end -->

    <!-- table -->
    <div class="table-responsive my-4">
        <table class="table table-striped">
            <thead class="table-dark">
                <tr>
                    <th>No.</th>
                    <th>Item Name</th>
                    <th>Item Price</th>
                    <th>Qty</th>
                    <th>Sub-Total</th>
                </tr>
            </thead>
            <tbody id="tbody">

            </tbody>
        </table>

        <div class="container">
            <div class="row">
                <div class="col offset-5">
                    <button class="btn btn-success order" id="order">Order</button>
                </div>
            </div>
        </div>
    </div>


    <!-- footer start -->
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1440 320"><path fill="#273036" fill-opacity="1" d="M0,288L12,261.3C24,235,48,181,72,165.3C96,149,120,171,144,170.7C168,171,192,149,216,165.3C240,181,264,235,288,213.3C312,192,336,96,360,69.3C384,43,408,85,432,106.7C456,128,480,128,504,149.3C528,171,552,213,576,213.3C600,213,624,171,648,165.3C672,160,696,192,720,197.3C744,203,768,181,792,181.3C816,181,840,203,864,224C888,245,912,267,936,234.7C960,203,984,117,1008,106.7C1032,96,1056,160,1080,208C1104,256,1128,288,1152,272C1176,256,1200,192,1224,160C1248,128,1272,128,1296,149.3C1320,171,1344,213,1368,234.7C1392,256,1416,256,1428,256L1440,256L1440,320L1428,320C1416,320,1392,320,1368,320C1344,320,1320,320,1296,320C1272,320,1248,320,1224,320C1200,320,1176,320,1152,320C1128,320,1104,320,1080,320C1056,320,1032,320,1008,320C984,320,960,320,936,320C912,320,888,320,864,320C840,320,816,320,792,320C768,320,744,320,720,320C696,320,672,320,648,320C624,320,600,320,576,320C552,320,528,320,504,320C480,320,456,320,432,320C408,320,384,320,360,320C336,320,312,320,288,320C264,320,240,320,216,320C192,320,168,320,144,320C120,320,96,320,72,320C48,320,24,320,12,320L0,320Z"></path></svg>
    <footer class="container-fluid text-light" style="background-color: #273036;">
        <div class="container text_secondary py-5">
        <div class="row">
                <div class="col-12 col-md-4">
                    <h4 class="mt-0 ">LUCI</h4>
                    <p style="text-align: justify;">Burger, Fried-chicken and Hotdog</p>
                </div>
                <div class="col-6 col-md-2">
                    <a href="../index.html" class="nav-link ps-5 py-2">Home</a>
                    <a href="about.html" class="nav-link ps-5 py-2">About</a>
                    <a href="contact.html" class="nav-link ps-5 py-2">Contact</a>
                </div>
                <div class="col-6 col-md-2">
                    <a href="menu.html" class="nav-link ps-5 py-2">Menu</a>
                    <a href="review.html" class="nav-link ps-5 py-2">Review</a>
                </div>
                <div class="col-12 col-md-4">
                    <div class="row">
                        <div class="col-1">
                            <i class="fa-solid fa-house"></i>
                        </div>
                        <div class="col-11">
                            30th x 58th Street, ChanAyeTharZan Mandalay
                        </div>
                    </div>
                    <p class="pt-3">
                        <i class="fa-solid fa-phone pe-2"></i> +959 771623210
                    </p>
                    <p>
                        <i class="fa-solid fa-envelope pe-2"></i> alhtoonaw@gmail.com
                    </p>
                </div>
        </div>
        </div>
        <div class="text-center py-5" style="border-top: 3px solid white;">
            <a href="" class="text-white me-3"><i class="fa-brands fa-facebook fa-2x"></i></a>
            <a href="" class="text-white me-3"><i class="fa-brands fa-instagram fa-2x"></i></a>
            <a href="" class="text-white me-3"><i class="fa-brands fa-telegram fa-2x"></i></a>
            <a href="" class="text-white me-3"><i class="fa-brands fa-viber fa-2x"></i></a>
            <a href="" class="text-white me-3"><i class="fa-brands fa-twitter fa-2x"></i></a>
            <p class="pt-4">&copy;Copyright, All Right Reversed</p>
        </div>
    </footer>
    <!-- footer end -->

    <script src="../jquery.min.js"></script>
    <script src="../bootstrap/js/bootstrap.bundle.min.js"></script>
    <script src="../Fontawesome/js/all.min.js"></script>
    <script src="cart.js"></script>
    <script>
        $(document).ready(function () {
            add();
            get();
            function get(){
                let itemString = localStorage.getItem('luci');
                let itemArray;
                if (itemString) {
                    itemArray = JSON.parse(itemString);
                    let j = 1;
                    let data = '';
                    let total = 0;
                    if (itemArray != 0) {
                        let count = itemArray.length;
                        $('#count_number').text(count);
                    }
                    $.each(itemArray , function(i,v){
                        data += `<tr>
                                    <td>${j++}</td>
                                    <td>${v.item_name}</td>
                                    <td>${v.item_price}</td>
                                    <td><button class="btn btn-sm btn-outline-secondary min" data-item_i="${i}">-</button> ${v.qty} <button class="btn btn-sm btn-outline-secondary sum" data-item_i="${i}">+</button></td>
                                    <td class="price">${v.item_price * v.qty} MMK</td>
                            </tr>`
                        total += v.item_price * v.qty;
                    })
                    data += `<tr>
                            <td colspan="4" class="total">Total</td>
                            <td>${total} MMK</td>
                            </tr>`
        
                    $('#tbody').html(data);
                    }else{
                        let data = '';
                        $('#tbody').html(data);
                    }

                }

            $('#tbody').on('click', '.min',function(){
                //alert('Hi')
                let item_i = $(this).data('item_i');
                let itemStr = localStorage.getItem('luci');
                if(itemStr){
                    let itemArr = JSON.parse(itemStr);

                    $.each(itemArr, function(i,v){
                        if(item_i == i){
                            v.qty --;
                            if(v.qty == 0){
                                itemArr.splice(item_i,1);
                            }
                        }
                    })

                    let itemData = JSON.stringify(itemArr);
                    localStorage.setItem('luci',itemData);
                    add();
                    get();
                }
            });

            $('#tbody').on('click', '.sum',function(){
                //alert('Hi')
                let item_i = $(this).data('item_i');
                let itemStr = localStorage.getItem('luci');
                if(itemStr){
                    let itemArr = JSON.parse(itemStr);

                    $.each(itemArr, function(i,v){
                        if(item_i == i){
                            v.qty ++;
                        }
                    })

                    let itemData = JSON.stringify(itemArr);
                    localStorage.setItem('luci',itemData);
                    add();
                    get();
                }
            });

            $('#order').click(function (e) { 
                e.preventDefault();
                localStorage.clear();
                add();
                get();
            });
        });
    </script>
</body>
</html>